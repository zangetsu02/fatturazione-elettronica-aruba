---
title: Core
description: Package @fatturazione-elettronica-aruba/core
---

# Core

Package principale con client HTTP, autenticazione e tipi base.

## ArubaClient

Client principale che gestisce autenticazione e HTTP.

```typescript
import { ArubaClient } from '@fatturazione-elettronica-aruba/core';

const client = new ArubaClient(options);
```

### Opzioni

| Proprieta | Tipo | Default | Descrizione |
|-----------|------|---------|-------------|
| `environment` | `'demo' \| 'production'` | - | Ambiente API |
| `timeout` | `number` | `30000` | Timeout richieste (ms) |
| `maxRetries` | `number` | `3` | Retry per errori 429 |
| `tokenStorage` | `TokenStorage` | - | Storage token personalizzato |

### Proprieta

| Proprieta | Tipo | Descrizione |
|-----------|------|-------------|
| `auth` | `AuthClient` | Client autenticazione |
| `http` | `HttpClient` | Client HTTP |

## AuthClient

Gestione autenticazione OAuth2.

### signin(username, password)

```typescript
const result = await client.auth.signin('user', 'pass');
```

**Risposta:**
```typescript
interface AuthToken {
  access_token: string;
  token_type: 'bearer';
  expires_in: number;
  refresh_token: string;
  userName: string;
}
```

### refresh(refreshToken)

```typescript
const newToken = await client.auth.refresh(token);
```

### getUserInfo()

```typescript
const info = await client.auth.getUserInfo();
```

**Risposta:**
```typescript
interface UserInfo {
  username: string;
  pec: string;
  vatCode: string;
  fiscalCode: string;
  accountStatus: {
    expired: boolean;
    expirationDate: string;
  };
  usageStatus: {
    usedSpaceKB: number;
    maxSpaceKB: number;
  };
}
```

### getMulticedenti(params)

```typescript
const result = await client.auth.getMulticedenti({
  page: 0,
  size: 20,
});
```

### getMulticedenteById(id)

```typescript
const cedente = await client.auth.getMulticedenteById('123');
```

## Costanti

```typescript
import {
  ARUBA_ID_TRASMITTENTE,
  ARUBA_CODICE_DESTINATARIO,
  ARUBA_COUNTRY_CODE,
} from '@fatturazione-elettronica-aruba/core';

// ARUBA_ID_TRASMITTENTE = '01879020517'
// ARUBA_CODICE_DESTINATARIO = 'KRRH6B9'
// ARUBA_COUNTRY_CODE = 'IT'
```
